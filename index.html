<!DOCTYPE html>
<html>
  <head>
    <title>Program 5</title>
  </head>
  <body>
    <h1>Select a Major</h1>
    <input type="button" id="citbtn" value="CIT Majors">
    <input type="button" id="busbtn" value="Business Majors">
    <h2>We filter out dataset by major</h2>

    <div id="result"></div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var btns = document.querySelectorAll('#citbtn, #busbtn')
        console.log(btns)
        btns.forEach(function(btn) {
          btn.onclick = async function() {
            var response = await fetch('cit5students.json');
            if(response.ok) {
              var data = await response.json()
              var majorFilter = ""
              if (btn.id == "citbtn") {
                majorFilter = "CIT"
              }
              if (btn.id == "busbtn") {
                majorFilter = "BUS"
              }
              data = data.filter( (student) => student.major == majorFilter);

              var tableContents = "<table cellspacing='5'>"
              tableContents += "<tr><td>Name</td><td>Major</td><td>Midterm</td><td>Final</td>"

              for (i = 0; i < data.length; i++) {
                tableContents += `<tr><td> ${data[i].name} </td>
                <td>${data[i].major}</td>
                <td>${data[i].midterm}</td>
                <td>${data[i].final}</td></tr>`
              }
              tableContents += "</table>";

              document.querySelector('#result').innerHTML = tableContents
            }
            else {
              document.querySelector('#result').innerHTML = "Data not found";
            }
          }});
      })
    </script>

  </body>

</html>

